(function(e){function t(t){for(var r,a,i=t[0],u=t[1],c=t[2],l=0,p=[];l<i.length;l++)a=i[l],s[a]&&p.push(s[a][0]),s[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);f&&f(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var i=n[a];0!==s[i]&&(r=!1)}r&&(o.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},a={app:0},s={app:0},o=[];function i(e){return u.p+"js/"+({about:"about",page404:"page404",profile:"profile","profile-change-password":"profile-change-password","profile-main-info":"profile-main-info",signin:"signin",signup:"signup"}[e]||e)+"."+{about:"cb2a2efe",page404:"61e8750f",profile:"1209d930","profile-change-password":"2b3ad4f0","profile-main-info":"9808d1fa",signin:"7ad8dd55",signup:"3a314ae1"}[e]+".js"}function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={about:1,page404:1,"profile-main-info":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise(function(t,n){for(var r="css/"+({about:"about",page404:"page404",profile:"profile","profile-change-password":"profile-change-password","profile-main-info":"profile-main-info",signin:"signin",signup:"signup"}[e]||e)+"."+{about:"56127cd5",page404:"7a91e2aa",profile:"31d6cfe0","profile-change-password":"31d6cfe0","profile-main-info":"171adb44",signin:"31d6cfe0",signup:"31d6cfe0"}[e]+".css",s=u.p+r,o=document.getElementsByTagName("link"),i=0;i<o.length;i++){var c=o[i],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===r||l===s))return t()}var p=document.getElementsByTagName("style");for(i=0;i<p.length;i++){c=p[i],l=c.getAttribute("data-href");if(l===r||l===s)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||s,o=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");o.request=r,delete a[e],f.parentNode.removeChild(f),n(o)},f.href=s;var m=document.getElementsByTagName("head")[0];m.appendChild(f)}).then(function(){a[e]=0}));var r=s[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise(function(t,n){r=s[e]=[t,n]});t.push(r[2]=o);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=i(e),c=function(t){l.onerror=l.onload=null,clearTimeout(p);var n=s[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+r+": "+a+")");o.type=r,o.request=a,n[1](o)}s[e]=void 0}};var p=setTimeout(function(){c({type:"timeout",target:l})},12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/",u.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var p=0;p<c.length;p++)t(c[p]);var f=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},2583:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("96cf");var r,a=n("3b8d"),s=(n("cadf"),n("551c"),n("f751"),n("097d"),n("2b0e")),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e.loggedIn&&e.tokenExpired?n("div",{staticClass:"d-flex justify-content-center align-items-center h-100"},[n("h1",[e._v("Loading...")])]):n("router-view")],1)},i=[],u=n("cebc"),c=n("2f62"),l={data:function(){return{}},computed:Object(u["a"])({},Object(c["d"])("auth",["user"]),Object(c["c"])("auth",["loggedIn","tokenExpired"]))},p=l,f=(n("7faf"),n("2877")),m=Object(f["a"])(p,o,i,!1,null,null,null),h=m.exports,d=n("8c4f"),g=n("31bd"),v=n("75fc"),b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex flex-column",staticStyle:{height:"100%"}},[n("nav",{staticClass:"navbar navbar-expand-lg navbar-light",staticStyle:{"background-color":"#e3f2fd"}},[n("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[e._v("\n      "+e._s(e.appName)+"\n    ")]),e._m(0),n("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarColor03"}},[n("ul",{staticClass:"navbar-nav mr-auto"},[n("li",{staticClass:"nav-item active"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[e._v("\n            Home\n          ")])],1),n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/about"}},[e._v("\n            About\n          ")])],1)]),e.loggedIn?[e._v("\n        Hi, "),n("b",[e._v(e._s(e.user.name))]),e._v(".\n\n        "),n("button",{staticClass:"btn btn-primary btn-sm float-right ml-2",on:{click:function(t){return e.$router.push({name:"profile"})}}},[e._v("\n          Profile\n        ")]),n("button",{staticClass:"btn btn-secondary btn-sm float-right ml-2",on:{click:function(t){return e.$actionWithLoading(e.logout,"loadingLogout")}}},[e.loadingLogout?n("span",[e._v("\n            Loading...\n          ")]):n("span",[e._v("\n            Logout\n          ")])])]:n("form",{staticClass:"form-inline"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"inputEmail"}},[e._v("\n            Email:\n          ")]),n("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|"+e.$formValidator.rules.email,expression:"'required|' + $formValidator.rules.email"},{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],staticClass:"form-control mx-2",class:{"form-control":!0,"is-invalid":e.errors.has("email")},attrs:{id:"inputEmail","error-messages":e.errors.collect("email"),"data-vv-name":"email",type:"email",placeholder:"Enter email"},domProps:{value:e.form.email},on:{input:function(t){t.target.composing||e.$set(e.form,"email",t.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"inputPassword"}},[e._v("\n            Password:\n          ")]),n("input",{directives:[{name:"validate",rawName:"v-validate",value:e.$formValidator.rules.password,expression:"$formValidator.rules.password"},{name:"model",rawName:"v-model",value:e.form.password,expression:"form.password"}],staticClass:"form-control mx-2",class:{"form-control":!0,"is-invalid":e.errors.has("password")},attrs:{id:"inputPassword","data-vv-name":"password",type:"password",placeholder:"Password"},domProps:{value:e.form.password},on:{input:function(t){t.target.composing||e.$set(e.form,"password",t.target.value)}}})]),n("button",{staticClass:"btn btn-primary float-right",attrs:{type:"submit"},on:{click:function(t){return t.preventDefault(),e.submit(t)}}},[e.loading?n("span",[e._v("\n            Loading...\n          ")]):n("span",[e._v("\n            Sign in\n          ")])]),n("span",{staticClass:"ml-1"},[e._v("\n          or\n          "),n("router-link",{attrs:{to:{name:"signup"}}},[e._v("Sign up")])],1)])],2)]),n("verify-email-alert"),n("div",{staticClass:"container d-flex align-items-center justify-content-center pt-5",staticStyle:{height:"100%"}},[n("transition",{attrs:{name:"router",mode:"out-in"}},[n("router-view")],1)],1)],1)},w=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarColor03","aria-controls":"navbarColor03","aria-expanded":"false","aria-label":"Toggle navigation"}},[n("span",{staticClass:"navbar-toggler-icon"})])}],x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.$auth.user&&!e.$auth.user.hasVerifiedEmail,expression:"$auth.user && !$auth.user.hasVerifiedEmail"}],staticClass:"alert alert-primary mx-auto mt-3",attrs:{role:"alert"}},[e._v("\n  Please, verify your email. We sent a message there.\n  "),n("button",{staticClass:"btn btn-primary btn-sm ml-2",on:{click:e.resendEmailVerification}},[e.loading?n("span",[e._v("\n      Loading...\n    ")]):n("span",[e._v("\n      Resend\n    ")])])])},y=[],k={name:"MainLayoutVerifyEmail",data:function(){return{loading:!1}},methods:Object(u["a"])({resendEmailVerification:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$actionWithLoading(this.resend);case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},Object(c["b"])("auth/emailVerification",["resend"]))},_=k,E=Object(f["a"])(_,x,y,!1,null,"6f85c404",null),O=E.exports,R={name:"MainLayout",components:{VerifyEmailAlert:O},data:function(){return{appName:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_TITLE,form:{email:"test@test.com",password:"password"},loading:!1,loadingLogout:!1}},computed:Object(u["a"])({},Object(c["d"])("auth",["user"]),Object(c["c"])("auth",["token","loggedIn"])),methods:Object(u["a"])({submit:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$actionWithLoading(this.signin,"loading",this.form);case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},Object(c["b"])("auth",["signin","logout"]))},j=R,I=Object(f["a"])(j,b,w,!1,null,null,null),T=I.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w-100 h-100"},[n("auth"),n("hr"),n("h2",{staticClass:"mb-4 mt-5 text-center"},[e._v("\n    Users\n  ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.user,expression:"!user"}],staticClass:"alert alert-primary mx-auto w-50",attrs:{role:"alert"}},[e._v("\n    You need to be authorized to view.\n  ")]),n("table",{directives:[{name:"show",rawName:"v-show",value:e.users&&e.loggedIn,expression:"users && loggedIn"}],staticClass:"table"},[e._m(0),n("tbody",e._l(e.users,function(t){return n("tr",{key:t.id},[n("th",{attrs:{scope:"row"}},[e._v(e._s(t.id))]),n("td",[e._v(e._s(t.name))]),n("td",[e._v(e._s(t.email))]),n("td",[e._v(e._s(t.created_at))])])}),0)]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"text-muted text-center"},[e._v("\n    Loading...\n  ")])],1)},C=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",{staticClass:"thead-light"},[n("tr",[n("th",{attrs:{scope:"col"}},[e._v("id")]),n("th",{attrs:{scope:"col"}},[e._v("Name")]),n("th",{attrs:{scope:"col"}},[e._v("Email")]),n("th",{attrs:{scope:"col"}},[e._v("Created at")])])])}],N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w-50 mx-auto clearfix px-5 mb-4"},[n("div",{staticClass:"d-flex justify-content-center mb-3"},[n("router-link",{staticClass:"btn btn-secondary",attrs:{to:{name:"profile"}}},[e._v("\n      Profile(protected route)\n    ")]),n("router-link",{staticClass:"btn btn-secondary ml-2",attrs:{to:{name:"signup"}}},[e._v("\n      Sign up(only guests route)\n    ")]),n("router-link",{staticClass:"btn btn-secondary ml-2",attrs:{to:{name:"signin"}}},[e._v("\n      Sign in(only guests route)\n    ")])],1),n("b",[e._v("Logged in:")]),e._v(" "+e._s(e.loggedIn)+"\n\n  "),n("br"),n("b",[e._v("User: ")]),n("span",{directives:[{name:"show",rawName:"v-show",value:!e.user,expression:"!user"}]},[e._v("–")]),e.user?n("pre",{staticClass:"pl-4"},[e._v(e._s(e.user))]):n("br"),n("b",{staticClass:"mb-2"},[e._v("Token: ")]),e.token?n("span",{attrs:{title:e.token}},[e._v("\n    "+e._s(e.token.slice(0,40)+"...")+"\n  ")]):n("span",[e._v("–")]),n("br"),n("b",[e._v("Token expiration:")]),n("span",{domProps:{innerHTML:e._s(e.tokenExpiresInFormated||" –")}}),n("br"),n("b",[e._v("Refresh token expiration:")]),n("span",{domProps:{innerHTML:e._s(e.refreshTokenExpiresInFormated||" –")}})])},S=[],P=n("0a0d"),L=n.n(P),U={data:function(){return{form:{email:"test@test.com",password:"password"},loading:!1,tokenExpiresInFormated:null,refreshTokenExpiresInFormated:null}},computed:Object(u["a"])({},Object(c["d"])("auth",["token","refreshToken","tokenExpiresIn","refreshTokenExpiresIn","user"]),Object(c["c"])("auth",["loggedIn"])),mounted:function(){Math.floor(L()()/1e3),this.setExpiresTime(),setInterval(this.setExpiresTime,1e3)},methods:Object(u["a"])({submit:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.signin(this.form);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](1);case 8:this.loading=!1;case 9:case"end":return e.stop()}},e,this,[[1,6]])}));function t(){return e.apply(this,arguments)}return t}(),setExpiresTimeByToken:function(e){if(this.loggedIn){var t=this[e+"ExpiresIn"]-Math.floor(L()()/1e3),n=Math.abs(t),r="0".concat(Math.floor(n/3600),"h").slice(-3),a="0".concat(Math.floor(n%3600/60),"m").slice(-3),s="0".concat(Math.floor(n%60),"s").slice(-3),o=[r,a,s].join(":");this[e+"ExpiresInFormated"]=t<=0?'<span style="color: red"> token expired '.concat(o.slice(1)," ago.</span>"):o}else this[e+"ExpiresInFormated"]=null},setExpiresTime:function(){this.setExpiresTimeByToken("token"),this.setExpiresTimeByToken("refreshToken")}},Object(c["b"])("auth",["signin"]))},A=U,M=Object(f["a"])(A,N,S,!1,null,null,null),V=M.exports,q={name:"Home",components:{Auth:V},data:function(){return{users:[],loading:!1}},computed:Object(u["a"])({},Object(c["d"])("auth",["user"]),Object(c["c"])("auth",["loggedIn"])),watch:{loggedIn:function(e){e&&this.fetchUsers()}},mounted:function(){this.loggedIn&&this.fetchUsers()},methods:{fetchUsers:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$get("users");case 3:this.users=e.sent,this.loading=!1;case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},B=q,D=Object(f["a"])(B,$,C,!1,null,null,null),F=D.exports,G=[{name:"signup",path:"/signup",component:function(){return n.e("signup").then(n.bind(null,"5794"))},meta:{guest:!0}},{name:"signin",path:"/signin",component:function(){return n.e("signin").then(n.bind(null,"a50e"))},meta:{guest:!0}},{name:"forgot-password",path:"/forgot-password",component:function(){return n.e("signin").then(n.bind(null,"66e9"))},meta:{guest:!0}},{name:"reset-password",path:"/reset-password/:token/:email",component:function(){return n.e("signin").then(n.bind(null,"6127"))},meta:{guest:!0}},{name:"verify-email",path:"/verify-email",component:function(){return n.e("signin").then(n.bind(null,"9b60"))}}],H=[{path:"/profile",component:function(){return n.e("profile").then(n.bind(null,"4bf6"))},children:[{name:"profile",path:"",component:function(){return n.e("profile-main-info").then(n.bind(null,"2c8e"))},meta:{auth:!0}},{name:"profile-change-password",path:"/change-password",component:function(){return n.e("profile-change-password").then(n.bind(null,"2fff"))},meta:{auth:!0}}]}],W=[{name:"about",path:"/about",component:function(){return n.e("about").then(n.bind(null,"a1d1"))}}],K=[{path:"/",component:T,children:[{name:"home",path:"",component:F}].concat(Object(v["a"])(G),Object(v["a"])(H),Object(v["a"])(W),[{path:"*",component:function(){return n.e("page404").then(n.bind(null,"ee5d"))}}])}],X=n("0759"),J=n.n(X),z=n("bd86"),Y=n("f499"),Q=n.n(Y),Z=s["a"].prototype,ee="USER",te="USER_LOGGED_IN",ne="USER_LOGGED_OUT",re="TOKEN",ae="REFRESH_TOKEN_EXPIRED",se={namespaced:!0,state:{},mutations:{},actions:{sendEmail:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,s,o,i,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.dispatch,t.commit,r=_e.resolve({name:"reset-password",params:{token:"<token>",email:"<email>"}}),a=r.href,s=location.port?":"+location.port:"",o=location.protocol+"//"+location.hostname+s+a,e.next=6,Z.$post("auth/forgot-password-email",{email:n,resetUrl:o});case 6:i=e.sent,u=i.message,Z.$notify.success(u);case 9:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),resetPassword:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,t.commit,e.next=3,Z.$post("auth/forgot-password-reset",n);case 3:return a=e.sent,a.showMsg=!1,e.next=7,r("auth/loggedIn",a,{root:!0});case 7:Z.$notify.success("Password has been reset successfully!");case 8:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}()}},oe={namespaced:!0,state:{},mutations:{},actions:{resend:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.dispatch,t.commit,e.next=3,Z.$post("auth/email/resend");case 3:n=e.sent,Z.$notify.success(n);case 5:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),verify:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,s,o,i,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,t.commit,e.prev=1,e.next=4,Z.$post(n);case 4:a=e.sent,s=a.message,o=a.user,r("auth/setUser",o,{root:!0}),Z.$notify.success(s),_e.push({name:"profile"}),e.next=18;break;case 12:e.prev=12,e.t0=e["catch"](1),i=e.t0.response,u=i.status,i.message,401===u?_e.push({name:"signin"}):429===u&&_e.push({name:"profile"});case 18:case"end":return e.stop()}},e,null,[[1,12]])}));function t(t,n){return e.apply(this,arguments)}return t}()}},ie={user:"auth__user",token:"auth__token",tokenExpiresIn:"auth__tokenExpiresIn",refreshTokenExpiresIn:"auth__refreshTokenExpiresIn"},ue=50,ce="auth/",le=null,pe={namespaced:!0,modules:{forgotPassword:se,emailVerification:oe},state:{user:JSON.parse(localStorage.getItem(ie.user)),token:localStorage.getItem(ie.token),tokenExpiresIn:+localStorage.getItem(ie.tokenExpiresIn),refreshTokenExpiresIn:+localStorage.getItem(ie.refreshTokenExpiresIn),refreshTokenAlreadyExpired:!1},mutations:(r={},Object(z["a"])(r,ee,function(e,t){return e.user=t,localStorage.setItem(ie.user,Q()(t)),t}),Object(z["a"])(r,re,function(e,t){console.log("token_global",t),e.token=t&&t.accessToken||"",e.tokenExpiresIn=+(t&&t.expiresIn)||"",e.refreshTokenExpiresIn=+(t&&t.refreshTokenExpiresIn)||"",localStorage.setItem(ie.token,e.token),localStorage.setItem(ie.tokenExpiresIn,e.tokenExpiresIn),localStorage.setItem(ie.refreshTokenExpiresIn,e.refreshTokenExpiresIn)}),Object(z["a"])(r,ae,function(e){e.refreshTokenAlreadyExpired||(e.refreshTokenAlreadyExpired=!0,he(),de())}),Object(z["a"])(r,te,function(e){e.refreshTokenAlreadyExpired=!1,ve.state.route.meta.guest&&_e.push({name:"profile"}),me(e)}),Object(z["a"])(r,ne,function(e,t){he(),ve.state.route.meta.auth&&_e.push({name:"signin"}),ve.state.route.meta.guest&&_e.push("/")}),r),actions:{signin:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,t.commit,e.next=3,Z.$post("auth/signin",n);case 3:return a=e.sent,e.next=6,r("loggedIn",a);case 6:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),signup:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,t.commit,e.next=3,Z.$post("auth/signup",n);case 3:return a=e.sent,a.showMsg=!1,e.next=7,r("loggedIn",a);case 7:Z.$notify.success("Registered successfully!");case 8:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),loggedIn:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,s,o,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.dispatch,r=t.commit,a=n.user,s=n.tokenInfo,o=n.showMsg,i=void 0===o||o,r(re,s),r(ee,a),r(te),i&&Z.$notify.success("logged in successfully!");case 6:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),getUser:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,Z.$get("auth/user");case 3:return r=e.sent,a=r.user,e.abrupt("return",n(ee,a));case 6:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),logout:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,r=t.commit,e.next=3,Z.$post("auth/logout");case 3:return e.next=5,n("setNullTokenAndUser");case 5:r(ne,!0),Z.$notify.success("Logged out successfully.");case 7:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),refresh:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n,r,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,r=t.commit,a=t.state,e.next=3,Z.$post("auth/refresh");case 3:if(s=e.sent,"tokenAlreadyRefreshed"!==s.status){e.next=6;break}return e.abrupt("return");case 6:if("refreshTokenExpired"!==s.status){e.next=10;break}return e.next=9,n("refreshTokenExpired");case 9:return e.abrupt("return");case 10:r(re,s),me(a);case 12:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),refreshTokenExpired:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,r=t.commit,e.next=3,n("setNullTokenAndUser");case 3:r(ae),r(ne,!1);case 5:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),setNullUser:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,n(ee,null);case 2:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),setNullTokenAndUser:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,n(re,null),n(ee,null);case 3:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),setUser:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=t.commit,r(ee,n);case 2:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),init:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.state,me(n);case 2:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},getters:{loggedIn:function(e){return!!e.user},tokenNeedToRefresh:function(e){var t=e.tokenExpiresIn-ue,n=Math.floor(L()()/1e3);return e.token&&t<n},tokenExpired:function(e){return e.tokenExpiresIn<Math.floor(L()()/1e3)}}},fe=pe;function me(e){var t=e.token,n=e.tokenExpiresIn;if(t){var r=L()()/1e3,s=n-r-ue,o=s>0?1e3*s:0;clearTimeout(le),le=setTimeout(Object(a["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ve.dispatch(ce+"refresh");case 2:case"end":return e.stop()}},e)})),o)}}function he(){clearTimeout(le)}function de(){Z.$notify.info("Please, log in again")}var ge={namespaced:!0,state:{},mutations:{},actions:{setPassword:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,t.commit,e.next=3,Z.$post("profile/current/set-password",n);case 3:a=e.sent,s=a.message,o=a.user,r("auth/setUser",o,{root:!0}),Z.$notify.success(s);case 8:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}()}};s["a"].use(c["a"]);var ve=new c["a"].Store({plugins:[J()({predicate:["auth/USER","auth/TOKEN","auth/REFRESH_TOKEN_EXPIRED","auth/USER_LOGGED_IN","auth/USER_LOGGED_OUT"]})],modules:{auth:fe,profile:ge},state:{},mutations:{},actions:{}});function be(e){e.beforeEach(function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n,r){var a,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=ve.state.auth.token,s=ve.state.auth.user,o=ve.getters["auth/tokenNeedToRefresh"],e.prev=3,e.t0=!s&&a&&!o,!e.t0){e.next=8;break}return e.next=8,ve.dispatch("auth/getUser");case 8:e.next=13;break;case 10:e.prev=10,e.t1=e["catch"](3),console.error(e.t1);case 13:!a&&s&&ve.dispatch("auth/setNullUser"),r();case 15:case"end":return e.stop()}},e,null,[[3,10]])}));return function(t,n,r){return e.apply(this,arguments)}}())}function we(e){e.beforeEach(function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n,r){var a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.matched.some(function(e){return e.meta.auth}),s=ve.state.auth.user,!a||s){e.next=6;break}return r({name:"signin"}),Z.$notify.error("This page requires authentication!"),e.abrupt("return");case 6:r();case 7:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}())}function xe(e){e.beforeEach(function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n,r){var a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.matched.some(function(e){return e.meta.guest}),s=ve.state.auth.user,!a||!s){e.next=6;break}return n.fullPath?r(!1):r({name:"home"}),Z.$notify.error("This page is for guests only!"),e.abrupt("return");case 6:r();case 7:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}())}var ye=function(e){be(e),we(e),xe(e)};s["a"].use(d["a"]);var ke=new d["a"]({mode:"history",base:"/",routes:K});Object(g["sync"])(ve,ke),ye(ke);var _e=ke,Ee=(n("2583"),n("bc3a")),Oe=n.n(Ee),Re=n("0987"),je=n("5d73"),Ie=n.n(je),Te=n("7bb1"),$e={name:"required|alpha_spaces|max:30",email:"email",password:"required|min:5"},Ce=new Te["a"]($e),Ne=function(e){var t=e.data,n=t.errors,r="";if(n){for(var a in n)if(n.hasOwnProperty(a)){var s=!0,o=!1,i=void 0;try{for(var u,c=Ie()(n[a]);!(s=(u=c.next()).done);s=!0){var l=u.value;r+="".concat(l,"<br>")}}catch(p){o=!0,i=p}finally{try{s||null==c.return||c.return()}finally{if(o)throw i}}}}else r=t.message;Z.$notify.error(r)},Se=Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_BACKEND+"/api/";s["a"].use(Re["a"],{axios:Oe.a,config:{baseURL:Se,headers:{"X-Requested-With":"XMLHttpRequest"}},interceptors:{beforeRequest:function(e,t){if(e.baseURL===Se){var n=ve.state.auth.token;n&&(e.headers.Authorization="Bearer ".concat(n))}return e},beforeResponseError:function(e){var t=e.response,n=e.message;t?Ne(t):n&&Z.$notify.error(n)}}});n("ab8b");var Pe=n("e440"),Le=n.n(Pe),Ue=n("2685"),Ae=n.n(Ue);n("6705");function Me(e){var t=e.title,n=e.message,r=e.type,a=e.timeout;e.cb;return r===Le.a.types.warn&&(r="warning"),Ae.a[r]({title:t,message:n,timeout:a})}var Ve={success:Me,error:Me,info:Me,warn:Me},qe={},Be=function(e){qe[e]=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.timeout,s=void 0===a?3e3:a;Me({type:e,title:t,message:n,timeout:s})}};for(var De in Ve)Be(De);s["a"].use(Le.a,Ve),s["a"].prototype.$notify=qe,s["a"].use(Te["b"]),s["a"].prototype.$formValidator={rules:$e,validate:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.validator.validateAll(t));case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),validator:Ce},s["a"].config.productionTip=!1,s["a"].prototype.$auth={get user(){return ve.state.auth.user},get loggedIn(){return ve.getters["auth/loggedIn"]}},s["a"].prototype.$actionWithLoading=function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n,r,a,s,o=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:for(n=o.length>1&&void 0!==o[1]?o[1]:"loading",this[n]=!0,e.prev=2,r=o.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=o[s];return e.next=6,t.apply(void 0,a);case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e["catch"](2),e.t0;case 11:return e.prev=11,this[n]=!1,e.finish(11);case 14:case"end":return e.stop()}},e,this,[[2,8,11,14]])}));return function(t){return e.apply(this,arguments)}}(),new s["a"]({router:_e,store:ve,render:function(e){return e(h)}}).$mount("#app"),ve.dispatch("auth/init")},"7faf":function(e,t,n){"use strict";var r=n("dc71"),a=n.n(r);a.a},dc71:function(e,t,n){}});
//# sourceMappingURL=app.47951b07.js.map